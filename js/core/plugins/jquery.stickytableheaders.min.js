(function(e,i){"use strict";function t(t,o){var d=this;d.$el=e(t),d.el=t,d.$el.bind("destroyed",e.proxy(d.teardown,d)),d.$window=e(i),d.$clonedHeader=null,d.$originalHeader=null,d.isCloneVisible=!1,d.leftOffset=null,d.topOffset=null,d.init=function(){d.options=e.extend({},l,o),d.$el.each(function(){var i=e(this);i.css("padding",0),d.$originalHeader=e("thead:first",this),d.$clonedHeader=d.$originalHeader.clone(),d.$clonedHeader.addClass("tableFloatingHeader"),d.$clonedHeader.css({position:"fixed",top:0,"z-index":1,display:"none"}),d.$originalHeader.addClass("tableFloatingHeaderOriginal"),d.$originalHeader.after(d.$clonedHeader),e("th",d.$clonedHeader).on("click."+n,function(){var i=e("th",d.$clonedHeader).index(this);e("th",d.$originalHeader).eq(i).click()}),i.on("sortEnd."+n,d.updateWidth),d.$printStyle=e('<style type="text/css" media="print">.tableFloatingHeader{display:none !important;}.tableFloatingHeaderOriginal{visibility:visible !important;}</style>'),e("head").append(d.$printStyle)}),d.updateWidth(),d.toggleHeaders(),d.bind()},d.destroy=function(){d.$el.unbind("destroyed",d.teardown),d.teardown()},d.teardown=function(){e.removeData(d.el,"plugin_"+n),d.unbind(),d.$clonedHeader.remove(),d.$originalHeader.removeClass("tableFloatingHeaderOriginal"),d.$originalHeader.css("visibility","visible"),d.$printStyle.remove(),d.el=null,d.$el=null},d.bind=function(){d.$window.on("scroll."+n,d.toggleHeaders),d.$window.on("resize."+n,d.toggleHeaders),d.$window.on("resize."+n,d.updateWidth)},d.unbind=function(){d.$window.off("."+n,d.toggleHeaders),d.$window.off("."+n,d.updateWidth),d.$el.off("."+n),d.$el.find("*").off("."+n)},d.toggleHeaders=function(){d.$el.each(function(){var i=e(this),t=isNaN(d.options.fixedOffset)?d.options.fixedOffset.height():d.options.fixedOffset,n=i.offset(),l=d.$window.scrollTop()+t,o=d.$window.scrollLeft();if(l>n.top&&n.top+i.height()>l){var a=n.left-o;if(d.isCloneVisible&&a===d.leftOffset&&t===d.topOffset)return;d.$clonedHeader.css({top:t,"margin-top":0,left:a,display:"block"}),d.$originalHeader.css("visibility","hidden"),d.isCloneVisible=!0,d.leftOffset=a,d.topOffset=t}else d.isCloneVisible&&(d.$clonedHeader.css("display","none"),d.$originalHeader.css("visibility","visible"),d.isCloneVisible=!1)})},d.updateWidth=function(){e("th",d.$clonedHeader).each(function(i){var t=e(this),n=e("th",d.$originalHeader).eq(i);this.className=n.attr("class")||"",t.css({"min-width":n.width(),"max-width":n.width()})}),d.$clonedHeader.css("width",d.$originalHeader.width())},d.init()}var n="stickyTableHeaders",l={fixedOffset:0};e.fn[n]=function(i){return this.each(function(){var l=e.data(this,"plugin_"+n);l?"string"==typeof i&&l[i].apply(l):"destroy"!==i&&e.data(this,"plugin_"+n,new t(this,i))})}})(jQuery,window);